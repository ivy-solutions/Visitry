<ion-view title="Groups" hide-tabs>
    <ion-nav-buttons side="right">
        <button ng-click="agencies.home()" class="button button-clear button-icon icon-right ion-ios-arrow-right" style="font-weight: 400;">
            {{visitry.isVisitor() ? 'Choose to Visit' : 'Requests'}}&nbsp;
        </button>
    </ion-nav-buttons>   <ion-content>
        <ion-list can-swipe="agencies.canSwipe">
            <div ng-repeat="agency in agencies.agencies">
            <ion-item>
                <a ng-click="agencies.agencyDetail(agency._id)">
                    <h2>
                        <i class="ion-checkmark-circled" ng-if="!agencies.isNotMember(agency._id)"
                           ng-class="{calm: agencies.isMember(agency._id), energized:agencies.isPendingMember(agency._id)}" ></i>
                        {{agency.name}}{{agencies.membershipStatus}}
                    </h2>
                    <div class="item-text-wrap"><h3>{{agency.description}}</h3></div>
                </a>
                <a ng-href="{{agency.website}}">{{agency.website}}</a>
                <p>{{agency.location.formattedAddress}}</p>
                <ion-option-button class="button-positive" ng-click="agencies.agencyDetail(agency._id)">
                    Details
                </ion-option-button>
            </ion-item>
            </div>
        </ion-list>
    </ion-content>
</ion-view>