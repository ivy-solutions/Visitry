<ion-view title="Choose to Visit" hide-back-button=true>
     <ion-content class="has-header">
         <div class="distance" ng-hide="!currentUser.userData.location">
             {{browseVisitRequests.openVisitCount}} requests within {{browseVisitRequests.vicinity }} miles of {{currentUser.userData.location.name | limitTo:20}}
         </div>
         <div ng-hide="currentUser.userData.location">
             {{browseVisitRequests.openVisitCount}} requests
         </div>

         <ion-list show-delete="browseVisitRequests.showDelete" can-swipe="browseVisitRequests.canSwipe">
            <div ng-repeat="visitsByDate in browseVisitRequests.openVisits">
                <div class="item item-divider">
                    {{visitsByDate.date|date: "EEE., MMMM d"}}
                </div>
                <ion-item ng-repeat="visit in visitsByDate.visits" class="item-avatar">
                    <img ng-src="{{browseVisitRequests.getRequesterImage(visit)}}"/>
                    <a ng-click="browseVisitRequests.visitDetails(visit._id)">
                        <div class="timeOfDay">{{visit.requestedDate | timeOfDay }}</div>
                        <div class="visitInfo">
                            <h2>{{browseVisitRequests.getRequester(visit) | firstNameLastInitial}}
                                <span class="distance">{{browseVisitRequests.getDistanceToVisitLocation(visit) }}</span></h2>
                            <p>{{visit.notes | limitTo:80 }}{{visit.notes.length >80 ?'...':''}}</p>
                        </div>
                    </a>
                    <ion-option-button class="button icon ion-ios-time" ng-click="browseVisitRequests.scheduleVisit(visit)">
                 </ion-option-button>
                </ion-item>
            </div>
        </ion-list>
    </ion-content>
</ion-view>

<ion-tabs class="tabs-balanced tabs-icon-top">
    <ion-tab title="Home" icon-on="ion-leaf" icon-off="ion-leaf" href="/visitor/browseRequests"></ion-tab>
    <ion-tab title="Upcoming" icon-on="ion-ios-calendar" icon-off="ion-ios-calendar-outline" href="/visitor/upcoming"></ion-tab>
</ion-tabs>