<ion-view title="Choose to Visit" hide-back-button=true>
     <ion-content class="has-header has-tabs">
         <div class="warning" ng-hide="connectionStatus==='connected'">
             No internet connection.
         </div>
         <div class="emptyListInfo" ng-hide="browseVisitRequests.openVisitCount > 0">
             No requests within {{browseVisitRequests.visitRange }} miles of {{currentUser.userData.location | streetAddress }}
         </div>
         <ion-list show-delete="browseVisitRequests.showDelete" can-swipe="browseVisitRequests.canSwipe">
            <div ng-repeat="visitsByDate in browseVisitRequests.openVisits">
                <div class="item item-divider">
                    {{visitsByDate.date|date: "EEEE, MMMM d"}}
                </div>
                <ion-item ng-repeat="visit in visitsByDate.visits" class="item-avatar">
                    <img ng-src="{{browseVisitRequests.getRequesterImage(visit)}}" ng-click="browseVisitRequests.visitDetails(visit._id)"/>
                    <a ng-click="browseVisitRequests.visitDetails(visit._id)">
                        <div class="timeOfDay">{{visit.requestedDate | timeOfDay }}</div>
                        <div class="visitInfo">
                            <h2>{{browseVisitRequests.getRequester(visit) | firstNameLastInitial}}
                                <span class="distance">{{browseVisitRequests.getDistanceToVisitLocation(visit) }}</span></h2>
                            <p>{{visit.notes | limitTo:80 }}{{visit.notes.length >80 ?'...':''}}</p>
                        </div>
                    </a>
                    <ion-option-button class="button icon ion-ios-time" ng-click="browseVisitRequests.scheduleVisit(visit)">
                 </ion-option-button>
                </ion-item>
            </div>
        </ion-list>
    </ion-content>
</ion-view>
<ion-tabs class="tabs-balanced" ng-class="{'tabs-color-dark': platform == 'android', 'tabs-icon-top': platform!='android'}">
    <ion-tab title="CHOOSE" ng-attr-icon="{{platform != 'android' ? 'ion-leaf' : undefined}}" href="/visitor/browseRequests">
    </ion-tab>
    <ion-tab title="SCHEDULED" ng-attr-icon-on="{{platform != 'android' ? 'ion-ios-calendar' : undefined}}"
             ng-attr-icon-off="{{platform != 'android' ? 'ion-ios-calendar-outline' : undefined}}" href="/visitor/upcoming">
    </ion-tab>
    <ion-tab title="FEEDBACK" badge="visitry.feedbackOutstanding" ng-attr-icon-on="{{platform != 'android' ? 'ion-ios-star' : undefined}}"
             ng-attr-icon-off="{{platform != 'android' ? 'ion-ios-star-outline' : undefined}}" badge-style="badge-assertive" href="/visitor/feedback">
    </ion-tab>
</ion-tabs>

