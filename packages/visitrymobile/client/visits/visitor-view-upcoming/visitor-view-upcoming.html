<ion-view view-title="Upcoming Visits" hide-back-button=true>
    <ion-content class="has-header has-tabs">
        <ion-list show-delete="visitorViewUpcoming.showDelete" can-swipe="visitorViewUpcoming.canSwipe">
            <div class="warning" ng-hide="connectionStatus==='connected'">
                No internet connection.
            </div>
            <div class="emptyListInfo" ng-hide="!visitorViewUpcoming.upcomingVisits.length==0">
                No scheduled visits
            </div>
            <div ng-repeat="visitsByDate in visitorViewUpcoming.upcomingVisits">
                <div class="item item-divider">
                    {{visitsByDate.date|date: "EEEE, MMMM d"}}
                </div>
                <ion-item ng-repeat="visit in visitsByDate.visits" class="item-avatar">
                    <img ng-src="{{visitorViewUpcoming.getRequesterImage(visit)}}" ng-click="visitorViewUpcoming.visitDetails(visit._id)"/>
                    <div class="timeOfDay">{{visit.visitTime | date: "h:mm"}}</div>
                    <div class="visitInfo">
                        <a ng-click="visitorViewUpcoming.visitDetails(visit._id)">
                            <h2>{{visitorViewUpcoming.getRequester(visit) | firstNameLastInitial}}
                            <span class="distance">{{visit.location | approximateLocation}}</span></h2>
                            <p style="white-space: nowrap">{{visit.notes}}</p>
                        </a>
                    </div>
                    <ion-option-button class="button-assertive" ng-click="visitorViewUpcoming.cancelVisit(visit)">
                        Cancel Visit
                    </ion-option-button>
                </ion-item>
            </div>
        </ion-list>
    </ion-content>
</ion-view>
<ion-tabs class="tabs-balanced" ng-class="{'tabs-color-dark': platform == 'android', 'tabs-icon-top': platform!='android'}">
    <ion-tab title="CHOOSE" ng-attr-icon="{{platform != 'android' ? 'ion-leaf' : undefined}}" href="/visitor/browseRequests">
    </ion-tab>
    <ion-tab title="SCHEDULED" ng-attr-icon-on="{{platform != 'android' ? 'ion-ios-calendar' : undefined}}"
             ng-attr-icon-off="{{platform != 'android' ? 'ion-ios-calendar-outline' : undefined}}" href="/visitor/upcoming">
    </ion-tab>
    <ion-tab title="FEEDBACK" badge="visitry.feedbackOutstanding" ng-attr-icon-on="{{platform != 'android' ? 'ion-ios-star' : undefined}}"
             ng-attr-icon-off="{{platform != 'android' ? 'ion-ios-star-outline' : undefined}}" badge-style="badge-assertive" href="/visitor/feedback">
    </ion-tab>
</ion-tabs>
