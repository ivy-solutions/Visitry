<ion-view view-title="Give Feedback" hide-back-button=true>
  <ion-content class="has-header has-tabs">
    <ion-list show-delete="feedbackList.showDelete" can-swipe="feedbackList.canSwipe">
        <div class="emptyListInfo" ng-hide="feedbackList.numFeedback!=0">
            No recent visits needing feedback.
        </div>
      <div ng-repeat="visitsByDate in feedbackList.pendingFeedback">
        <div class="item item-divider">
          {{visitsByDate.date|date:"EEEE, MMMM d"}}
        </div>
        <ion-item ng-repeat="visit in visitsByDate.visits" class="item-avatar" ng-click="feedbackList.giveFeedback(visit._id)">
          <img ng-src="{{feedbackList.getRequesterImage(visit)}}">
          <div layout="row">
            <h2>{{feedbackList.getRequester(visit) | firstNameLastInitial }}</h2>
            <span flex></span>
            <h4>{{visit.location.address | limitTo:10}}<span ng-if="visit.location.address.length > 10">...</span></h4>
          </div>
          <p>{{visit.notes}}</p>
        </ion-item>
      </div>
    </ion-list>
  </ion-content>
</ion-view>
<ion-tabs class="tabs-balanced" ng-class="{'tabs-color-dark': platform == 'android', 'tabs-icon-top': platform!='android'}">
    <ion-tab title="CHOOSE" ng-attr-icon="{{platform != 'android' ? 'ion-leaf' : undefined}}" href="/visitor/browseRequests">
    </ion-tab>
    <ion-tab title="SCHEDULED" ng-attr-icon-on="{{platform != 'android' ? 'ion-ios-calendar' : undefined}}"
             ng-attr-icon-off="{{platform != 'android' ? 'ion-ios-calendar-outline' : undefined}}" href="/visitor/upcoming">
    </ion-tab>
    <ion-tab title="FEEDBACK" badge="visitry.feedbackOutstanding" ng-attr-icon-on="{{platform != 'android' ? 'ion-ios-star' : undefined}}"
             ng-attr-icon-off="{{platform != 'android' ? 'ion-ios-star-outline' : undefined}}" badge-style="badge-assertive" href="/visitor/feedback">
    </ion-tab>
</ion-tabs>