<ion-view view-title="Register" hide-back-button=false hide-tabs>
    <ion-content class="has-header register padding">
        <ion-item class="card padding">
           <form name="registrationForm" novalidate="" ng-submit="register.createAccount(registrationForm)">
                <div class="list">
                    <label class="item item-input">
                        <input ng-model="register.credentials.userData.firstName" name="firstName" type="text" placeholder="First name" required autocomplete="off" autocorrect="off"/>
                    </label>
                    <div layout="row" ng-show="registrationForm.firstName.$error && (registrationForm.firstName.$touched || registrationForm.$submitted)" ng-messages="registrationForm.firstName.$error">
                        <span flex></span>
                        <span class="error-message" ng-messages-include="error-list.html"></span>
                    </div>
                    <label class="item item-input">
                        <input ng-model="register.credentials.userData.lastName" name="lastName" type="text" placeholder="Last name" required autocomplete="off" autocorrect="off"/>
                    </label>
                     <div layout="row" ng-show="registrationForm.lastName.$error && (registrationForm.lastName.$touched || registrationForm.$submitted)" ng-messages="registrationForm.lastName.$error">
                        <span flex></span>
                        <span class="error-message" ng-messages-include="error-list.html"></span>
                    </div>
                    <label class="item item-input">
                        <input ng-model="register.credentials.email" name="email" type="text" placeholder="Email" required ng-minlength="5" ng-pattern="/^.+@.+\..+$/"
                               autocorrect="off" autocapitalize="off"/>
                    </label>
                    <div layout="row" ng-show="registrationForm.email.$error && (registrationForm.email.$touched || registrationForm.$submitted)" ng-messages="registrationForm.email.$error">
                        <span flex></span>
                        <span class="error-message" ng-messages-include="error-list.html"></span>
                    </div>
                    <label class="item item-input">
                         <input ng-model="register.credentials.username" name="username" type="text" placeholder="Optional Username" autocomplete="off" autocorrect="off"/>
                    </label>
                    <div layout="row" ng-show="registrationForm.username.$error && (registrationForm.username.$touched || registrationForm.$submitted)" ng-messages="registrationForm.username.$error">
                        <span flex></span>
                        <span class="error-message" ng-messages-include="error-list.html"></span>
                    </div>
                    <label class="item item-input">
                         <input type="password" name="password" ng-model="register.credentials.password" placeholder="Password" ng-minlength="5" ng-maxlength="20" required>
                    </label>
                    <div layout="row" ng-show="registrationForm.password.$error && registrationForm.$submitted" ng-messages="registrationForm.password.$error">
                        <span flex></span>
                        <span class="error-message" ng-messages-include="error-list.html"></span>
                    </div>
                    <label class="item">
                        <ion-radio ng-model='register.credentials.role' value="requester">Request Visits</ion-radio>
                        <ion-radio ng-model='register.credentials.role' value="visitor">Visit Others</ion-radio>
                    </label>
                </div>
                <div class="padding item">
                    <button class="button button-block" >Submit</button>
                    <button class="button button-block button-clear" type="button" ng-click="register.cancel(registrationForm)">Cancel</button>
               </div>
            </form>
        </ion-item>
    </ion-content>
</ion-view>

<script id="error-list.html" type="text/ng-template">
    <div class="error-message" ng-message="pattern">
        Email must be valid.
    </div>
    <div class="error-message" ng-message="required">
        Required
    </div>
    <div class="error-message" ng-message="minlength">
        Must be least 5 characters.
    </div>
    <div class="error-message" ng-message="maxlength">
        Type no more than 20 characters.
    </div>
</script>