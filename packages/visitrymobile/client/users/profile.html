<ion-view title="{{profile.currentUser.username}}" hide-back-button=false>

    <ion-content class="has-header profile">
        <form name="profileForm" novalidate="" ng-submit="profile.submitUpdate(profileForm)">
             <div ng-if="!profile.currentUser.userData.picture">
                 <div class="profile-picture no-picture" ng-click="profile.updatePicture()">
                          <img ng-src="{{profile.currentUser.userData.picture}}"/>Add Picture
                 </div>
            </div>
            <div ng-if="profile.currentUser.userData.picture">
                <div class="profile-picture has-picture" ng-click="profile.updatePicture()">
                    <div class="item-avatar">
                        <img ng-src="{{profile.currentUser.userData.picture}}"/>
                    </div>
                </div>
            </div>
            <div class="username">{{profile.currentUser.userData.firstName}} {{profile.currentUser.userData.lastName}}</div>
            <ion-list>
                <label class="item item-input">
                    <i class="icon ion-location placeholder-icon"></i>
                    <input type="text" name="location" id="location" ng-google-places-autocomplete
                           ng-model="profile.currentUser.userData.location.address"
                           details="profile.locationDetails" ng-focus="profile.disableTap()" data-tap-disabled="true"
                           placeholder="{{profile.locationPlaceholder}}"/>
                </label>
                <div layout="row">
                    <span flex></span>
                    <span class="error-message" ng-hide="profileForm.location.$pristine  || profile.isLocationValid()">Choose a location or clear address</span>
                </div>
                <label class="item" ng-show="profile.isVisitor">Show visits within {{profile.distance}} miles
                    <div class="range range-positive">
                        1
                        <input type="range" name="distance" min="1" max="50" ng-model="profile.distance">
                        50
                    </div>
                </label>
                <label class="item item-input">
                    <input type="text" name="phoneNumber" ng-model="profile.currentUser.userData.phoneNumber"
                           placeholder="Optional phone number" ng-pattern="/^\(?[\d]{3}\)?[\s-]?[\d]{3}[\s-]?[\d]{4}$/" >
                    </input>
                </label>
                <div layout="row">
                    <span flex></span>
                    <span class="error-message" ng-show="profileForm.phoneNumber.$invalid && profileForm.phoneNumber.$touched">Use format: (888) 555-1212</span>
                </div>
                <label class="item item-input item-stacked-label">
                    <div class="input-label">About You</div>
                    <textarea ng-model="profile.currentUser.userData.about" rows="5" placeholder="Enter info about yourself - interests, background, pets, favorite activites, family, or anything at all.">
                    </textarea>
                </label>
            </ion-list>
             <button class="button button-block button-clear">
                Update Profile
            </button>
        </form>
    </ion-content>
</ion-view>